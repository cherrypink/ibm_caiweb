<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ibm.gbs.gbs_cai_web.mapper.ClassMapper">
    <cache />
    <select id="getClassesByCondition" resultType="hashmap" parameterType="hashmap">
        SELECT *	   
        FROM class
        WHERE booth=#{booth} and start=#{time} 
    </select>
    
    <!-- 상세보기 xml -->
    <select id="getDetailByCondition" resultType="hashmap" parameterType="int">
        SELECT *	   
        FROM class
        WHERE idx=#{idx} 
    </select>
        
    <select id="getMyLec" resultType="hashmap" parameterType="String">
        SELECT *	   
        FROM enrollment
        WHERE user_id=#{user_id} 
    </select>
    
    <select id="getThisLec" resultType="hashmap" parameterType="String">
        SELECT *	   
        FROM class
        WHERE class_id=#{class_id} 
    </select>
    
    <select id="checkCode" resultType="int" parameterType="hashmap">
    	SELECT count(1)
    	FROM class
    	WHERE class_id=#{class_id} and attend_code=#{code}
    </select>
    
    <update id="updateFlag" parameterType="hashmap">
    	UPDATE enrollment
    	SET attend_yn = 'Y'
    	WHERE user_id=#{user_id} and class_id=#{class_id}
    </update>
    
    
</mapper>